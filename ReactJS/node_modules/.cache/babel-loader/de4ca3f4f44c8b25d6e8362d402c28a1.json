{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\Source\\\\Project\\\\ReactJS\\\\src\\\\components\\\\User\\\\SignUp.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { signUserUp } from '../../services/user_services';\nimport { isNullOrEmpty } from '../../services/services_custom';\nimport { Button, Form, Grid, Header, Segment } from 'semantic-ui-react';\nimport { Redirect } from 'react-router-dom';\nexport const useIsMount = () => {\n  _s();\n\n  const isMountRef = useRef(true);\n  useEffect(() => {\n    isMountRef.current = false;\n  }, []);\n  return isMountRef.current;\n};\n\n_s(useIsMount, \"0qXoaEnsCX1Hu4P4+DXslUBKwsw=\");\n\nconst SignUpComponent = props => {\n  _s2();\n\n  const [userInfo, setUserInfo] = useState({\n    name: \"\",\n    password: \"\",\n    email: \"\",\n    phone: '',\n    confirmPassword: \"\"\n  });\n  const [errorNameInput, setErrorInputdName] = useState({});\n  const [errors, setErrors] = useState({});\n\n  const handleOnChange = e => {\n    e.persist();\n    setUserInfo(prstate => ({ ...prstate,\n      [e.target.name]: e.target.value\n    }));\n    setErrorInputdName(() => ({\n      [\"NameInput\"]: e.target.name\n    }));\n  };\n\n  const isMount = useIsMount();\n  useEffect(() => {\n    debugger;\n\n    if (!isMount) {\n      validate(errorNameInput.NameInput);\n    }\n  }, [userInfo, errorNameInput.NameInput]);\n  var authed = props.user.loggedIn;\n\n  if (authed) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/usersPosts\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }, this);\n  }\n\n  const setErrorValue = (nameInput, value) => {\n    setErrors(preState => ({ ...preState,\n      [nameInput]: value\n    }));\n  };\n\n  function validate(nameInput = null) {\n    let input = userInfo;\n    let isValid = true;\n    let name = null;\n\n    switch (nameInput) {\n      case \"name\":\n        {\n          name = nameInput;\n          setErrors(pref => ({ ...pref,\n            [name]: null\n          }));\n          break;\n        }\n\n      case \"phone\":\n        name = nameInput;\n        setErrors(pref => ({ ...pref,\n          [name]: null\n        }));\n        break;\n\n      case \"email\":\n        name = nameInput;\n        setErrors(pref => ({ ...pref,\n          [name]: null\n        }));\n        break;\n\n      default:\n        name = null;\n    }\n\n    debugger;\n\n    if (isNullOrEmpty(input[\"name\"]) && (!name || name === \"name\")) {\n      debugger;\n      isValid = false;\n      setErrorValue(\"name\", \"Будь ласка ведіть ім'я\");\n    }\n\n    if (isNullOrEmpty(input[\"phone\"]) && (!name || name === 'phone')) {\n      isValid = false;\n      setErrorValue(\"phone\", \"Будь ласка ведіть телефон\");\n    }\n\n    if (isNullOrEmpty(input[\"email\"]) && (!name || name === 'email')) {\n      isValid = false;\n      setErrorValue(\"email\", \"Будь ласка ведіть почту\");\n    }\n\n    if (typeof input[\"email\"] !== \"undefined\" && (!name || name === 'email')) {\n      var pattern = new RegExp(/^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i);\n\n      if (!pattern.test(input[\"email\"])) {\n        isValid = false;\n        setErrorValue(\"email\", \"Будь ласка ведіть валідну почту\");\n      }\n    }\n\n    if ((isNullOrEmpty(input[\"password\"]) || input[\"password\"].length < 5) && (!name || name === 'password')) {\n      isValid = false;\n      setErrorValue(\"password\", \"Будь ласка ведіть коректний  пароль\");\n    }\n\n    return isValid;\n  }\n\n  const onSubmit = e => {\n    e.preventDefault();\n\n    if (validate()) {\n      props.signUserUp(userInfo);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Grid, {\n    textAlign: \"center\",\n    style: {\n      height: '50vh'\n    },\n    verticalAlign: \"middle\",\n    children: /*#__PURE__*/_jsxDEV(Grid.Column, {\n      style: {\n        maxWidth: 450\n      },\n      children: [/*#__PURE__*/_jsxDEV(Header, {\n        as: \"h2\",\n        color: \"rgb(25,41,64)\",\n        textAlign: \"center\",\n        children: \"\\u0420\\u0435\\u0454\\u0441\\u0442\\u0440\\u0430\\u0446\\u0456\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        size: \"large\",\n        children: /*#__PURE__*/_jsxDEV(Segment, {\n          stacked: true,\n          children: [/*#__PURE__*/_jsxDEV(Form.Input, {\n            value: userInfo.username,\n            name: \"name\",\n            onChange: e => handleOnChange(e),\n            placeholder: \"\\u0406\\u043C'\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: errors.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n            value: userInfo.email,\n            name: \"email\",\n            onChange: e => handleOnChange(e),\n            placeholder: \"\\u043F\\u043E\\u0448\\u0442\\u0430\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: errors.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n            value: userInfo.phone,\n            name: \"phone\",\n            onChange: e => handleOnChange(e),\n            placeholder: \"\\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-danger\",\n            children: errors.phone\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n            fluid: true,\n            icon: \"lock\",\n            iconPosition: \"left\",\n            name: \"password\",\n            placeholder: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n            value: userInfo.password,\n            onChange: e => handleOnChange(e),\n            type: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Form.Input, {\n            fluid: true,\n            icon: \"lock\",\n            iconPosition: \"left\",\n            name: \"password\",\n            placeholder: \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0456\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n            value: userInfo.password,\n            onChange: e => handleOnChange(e),\n            type: \"password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            color: \"black\",\n            size: \"large\",\n            type: \"submit\",\n            value: \"\\u0412\\u0456\\u0439\\u0442\\u0438\",\n            onClick: onSubmit,\n            children: \" \\u041F\\u0456\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0438\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(SignUpComponent, \"BypgcY33NsKKwKpxE2EaQ7DJNy4=\", false, function () {\n  return [useIsMount];\n});\n\n_c = SignUpComponent;\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    signUserUp: userInfo => dispatch(signUserUp(userInfo))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpComponent);\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUpComponent\");","map":{"version":3,"sources":["D:/Source/Project/ReactJS/src/components/User/SignUp.js"],"names":["React","useState","useRef","useEffect","connect","signUserUp","isNullOrEmpty","Button","Form","Grid","Header","Segment","Redirect","useIsMount","isMountRef","current","SignUpComponent","props","userInfo","setUserInfo","name","password","email","phone","confirmPassword","errorNameInput","setErrorInputdName","errors","setErrors","handleOnChange","e","persist","prstate","target","value","isMount","validate","NameInput","authed","user","loggedIn","setErrorValue","nameInput","preState","input","isValid","pref","pattern","RegExp","test","length","onSubmit","preventDefault","height","maxWidth","username","mapStateToProps","state","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React,{useState,useRef, useEffect} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {signUserUp} from '../../services/user_services'\r\nimport {isNullOrEmpty} from '../../services/services_custom'\r\nimport { Button, Form, Grid, Header,  Segment } from 'semantic-ui-react'\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nexport const useIsMount = () => {\r\n  const isMountRef = useRef(true);\r\n  useEffect(() => {\r\n    isMountRef.current = false;\r\n  }, []);\r\n  return isMountRef.current;\r\n};\r\n\r\nconst SignUpComponent = (props) => {\r\n    const [userInfo, setUserInfo] = useState({\r\n        name: \"\",\r\n        password: \"\",\r\n        email: \"\",\r\n        phone:'',\r\n        confirmPassword:\"\"\r\n    });\r\n    \r\n    const [errorNameInput,setErrorInputdName] = useState({});\r\n    const [errors, setErrors] = useState({});\r\n    const handleOnChange = (e) => {\r\n        \r\n            e.persist();\r\n            setUserInfo((prstate) => ({\r\n                ...prstate,\r\n                [e.target.name]: e.target.value \r\n            }));\r\n            setErrorInputdName(()=>({\r\n                [\"NameInput\"] : e.target.name\r\n            }));\r\n    }\r\n    const isMount = useIsMount();\r\n\r\n    useEffect(() => {\r\n        debugger;\r\n        if(!isMount)\r\n        {\r\n           validate(errorNameInput.NameInput); \r\n        }\r\n     }, [userInfo,errorNameInput.NameInput]);\r\n\r\n    var authed = props.user.loggedIn;\r\n    if(authed)\r\n    {\r\n        return (<Redirect to='/usersPosts'/>);\r\n    }\r\n    const setErrorValue = (nameInput,value) =>\r\n    {\r\n        setErrors((preState)=>({\r\n            ...preState,\r\n            [nameInput]:value\r\n        }))\r\n    }\r\n    function validate(nameInput = null){\r\n        let input = userInfo;\r\n        let isValid = true;\r\n        let name = null;\r\n        switch(nameInput)\r\n        {\r\n            case \"name\":\r\n                {\r\n                   name = nameInput; \r\n                   setErrors((pref) =>({\r\n                       ...pref,\r\n                       [name]:null\r\n                   }))\r\n                   break;\r\n                }\r\n            case \"phone\":\r\n                name = nameInput;\r\n                setErrors((pref) =>({\r\n                    ...pref,\r\n                    [name]:null\r\n                }))\r\n                break;\r\n            case \"email\":\r\n                name = nameInput;\r\n                setErrors((pref) =>({\r\n                    ...pref,\r\n                    [name]:null\r\n                }))\r\n                break;\r\n            default :\r\n                name = null;\r\n        }\r\n        debugger;\r\n        if ( isNullOrEmpty( input[\"name\"]) && ((!name) || name === \"name\")) {\r\n            debugger;\r\n          isValid = false;\r\n          setErrorValue (\"name\" , \"Будь ласка ведіть ім'я\");\r\n        }\r\n        \r\n        if (isNullOrEmpty(input[\"phone\"]) && ((!name) || name === 'phone')) {\r\n            isValid = false;\r\n            setErrorValue (\"phone\" , \"Будь ласка ведіть телефон\");\r\n        }\r\n\r\n        if (isNullOrEmpty(input[\"email\"]) && ((!name) || name === 'email')) {\r\n          isValid = false;\r\n          setErrorValue (\"email\" , \"Будь ласка ведіть почту\");\r\n        }\r\n    \r\n        if (typeof input[\"email\"] !== \"undefined\" && ((!name) || name === 'email')) {\r\n            \r\n          var pattern = new RegExp(/^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i);\r\n          if (!pattern.test(input[\"email\"])) {\r\n            isValid = false;\r\n            setErrorValue (\"email\" , \"Будь ласка ведіть валідну почту\");\r\n          }\r\n        }\r\n        \r\n        if ((isNullOrEmpty(input[\"password\"]) || input[\"password\"].length<5) && ((!name) || name === 'password') ) {\r\n            isValid = false;\r\n            setErrorValue (\"password\" , \"Будь ласка ведіть коректний  пароль\");\r\n        }\r\n    \r\n       \r\n          \r\n    \r\n        return isValid;\r\n    }\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault();\r\n        if(validate())\r\n        {\r\n           props.signUserUp(userInfo) \r\n        }\r\n        \r\n    }\r\n\r\n    return(\r\n    <Grid textAlign='center' style={{ height: '50vh' }} verticalAlign='middle'>\r\n        <Grid.Column style={{ maxWidth: 450 }}>\r\n        <Header as='h2' color='rgb(25,41,64)' textAlign='center'>\r\n            Реєстрація\r\n        </Header>\r\n        \r\n            <Form size='large'>\r\n                <Segment stacked>\r\n                    <Form.Input  value={userInfo.username}\r\n                            name= 'name'\r\n                            onChange={e=> handleOnChange(e)} placeholder=\"Ім'я\" />\r\n                    <span className=\"text-danger\">{errors.name}</span>\r\n                    <Form.Input value={userInfo.email}\r\n                            name ='email'\r\n                            onChange={e=> handleOnChange(e)} placeholder=\"пошта\" />\r\n                    <span className=\"text-danger\">{errors.email}</span>\r\n                    <Form.Input value={userInfo.phone}\r\n                        name ='phone'\r\n                        onChange={e=> handleOnChange(e)} placeholder=\"телефон\"/>\r\n                    <span className=\"text-danger\">{errors.phone}</span>\r\n\r\n                    <Form.Input\r\n                        fluid\r\n                        icon='lock'\r\n                        iconPosition='left'\r\n                        name ='password'\r\n                        placeholder='Пароль'\r\n                        value={userInfo.password}\r\n                        onChange={e => handleOnChange(e)}\r\n                        type='password'\r\n                    />\r\n                     <Form.Input\r\n                        fluid\r\n                        icon='lock'\r\n                        iconPosition='left'\r\n                        name ='password'\r\n                        placeholder='Повторіть пароль'\r\n                        value={userInfo.password}\r\n                        onChange={e => handleOnChange(e)}\r\n                        type='password'\r\n                    />\r\n                    <Button color='black' size='large'type=\"submit\"  value=\"Війти\" onClick={onSubmit}> Підтвердити</Button>\r\n                </Segment>\r\n            </Form>\r\n        </Grid.Column>\r\n    </Grid>\r\n    )\r\n}\r\n\r\nconst  mapStateToProps=(state)=>{\r\n    return{\r\n        user:state.user,\r\n    }\r\n  };\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        signUserUp: (userInfo) => dispatch(signUserUp(userInfo))\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpComponent)"]},"metadata":{},"sourceType":"module"}