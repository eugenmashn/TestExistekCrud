{"ast":null,"code":"import { setUser, setMessage, setUserPost, setUserLoading, logUserOut } from './../redux/User/userActions';\nimport urlApi from './UrlRequest';\nexport const fetchUser = userInfo => dispatch => {\n  try {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      body: JSON.stringify(userInfo)\n    };\n    fetch(urlApi + `/users/login`, requestOptions).then(res => res.json()).then(data => {\n      if (!data.error) {\n        localStorage.setItem(\"token\", data.currentToken);\n        dispatch(setUser({ ...data.user\n        }));\n      } else {\n        dispatch(setMessage(data.error));\n      }\n    }).catch(e => {\n      console.log(e);\n    });\n  } catch {\n    console.log('Error!');\n  }\n};\nexport const updateUser = userInfo => async dispatch => {\n  try {\n    let token = localStorage.getItem(\"token\");\n    const requestOptions = {\n      method: 'PATCH',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\",\n        \"Token\": token\n      },\n      body: JSON.stringify(userInfo)\n    };\n    debugger;\n    fetch(urlApi + '/users/update', requestOptions).then(res => res.json()).then(data => {\n      debugger;\n      dispatch(setUser(data));\n    });\n  } catch {}\n};\nexport const logoutUser = () => async dispatch => {\n  try {\n    let token = localStorage.getItem(\"token\");\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\",\n        \"Token\": token\n      }\n    };\n    debugger;\n    fetch(urlApi + '/users/me/logout', requestOptions).then(res => res.json()).then(data => {\n      debugger;\n      dispatch(logUserOut());\n    }).catch(e => {\n      console.log(e);\n    });\n  } catch {\n    console.log('Error!');\n  }\n};\nexport const GetUsersPosts = (page, author) => async dispatch => {\n  try {\n    if (!author) return;\n    const requestOptions = {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      body: JSON.stringify({\n        match: {\n          author: author\n        },\n        sort: {},\n        limit: 10,\n        page: page\n      })\n    };\n    debugger;\n    fetch(urlApi + '/post/filterPosts', requestOptions).then(res => res.json()).then(data => {\n      dispatch(setUserPost(data));\n      dispatch(setUserLoading(true));\n    }).catch(e => {\n      console.log(e);\n    });\n  } catch {\n    dispatch(setUserLoading(false));\n    console.log('Error!');\n  }\n};\nexport const signUserUp = userInfo => dispatch => {\n  try {\n    fetch(urlApi + `/users/createNewUser`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify(userInfo)\n    }).then(res => res.json()).then(data => {\n      debugger;\n      localStorage.setItem(\"token\", data.currentToken);\n      dispatch(setUser(data.user));\n    }).catch(e => {\n      console.log(e);\n    });\n  } catch {\n    console.log('Error!');\n  }\n};\nexport const autoLogin = () => dispatch => {\n  try {\n    fetch(`urlApi/auto_login`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\",\n        \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(res => res.json()).then(data => {\n      localStorage.setItem(\"token\", data.currentToken);\n      dispatch(setUser(data));\n    }).catch(e => {\n      console.log(e);\n    });\n  } catch {\n    console.log('Error!');\n  }\n};","map":{"version":3,"sources":["D:/Source/Project/ReactJS/src/services/user_services.js"],"names":["setUser","setMessage","setUserPost","setUserLoading","logUserOut","urlApi","fetchUser","userInfo","dispatch","requestOptions","method","headers","body","JSON","stringify","fetch","then","res","json","data","error","localStorage","setItem","currentToken","user","catch","e","console","log","updateUser","token","getItem","logoutUser","GetUsersPosts","page","author","mode","match","sort","limit","signUserUp","autoLogin"],"mappings":"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","sourcesContent":["import {setUser,setMessage,setUserPost,setUserLoading,logUserOut} from './../redux/User/userActions'\r\nimport urlApi from './UrlRequest'\r\n\r\nexport const fetchUser = (userInfo) => dispatch => {\r\n    try {\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { \r\n                \"Content-type\": \"application/json; charset=UTF-8\"\r\n            },\r\n            body: JSON.stringify(userInfo)\r\n        };\r\n        fetch( urlApi+`/users/login`,requestOptions)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            if(!data.error)\r\n            {\r\n                localStorage.setItem(\"token\", data.currentToken);\r\n                dispatch(setUser({...data.user}));\r\n            }\r\n            else{\r\n                dispatch(setMessage(data.error));\r\n            }\r\n        })\r\n        .catch((e)=>{\r\n            console.log(e);\r\n        });\r\n        } catch{\r\n        \r\n        console.log('Error!');\r\n    }\r\n}\r\n\r\nexport const updateUser = (userInfo) => async(dispatch) =>{\r\n    try{\r\n        let token =  localStorage.getItem(\"token\");\r\n        const requestOptions = {\r\n            method: 'PATCH',\r\n            headers: { \r\n                \"Content-type\": \"application/json; charset=UTF-8\",\r\n                \"Token\": token,\r\n                \r\n            },\r\n            body: JSON.stringify(userInfo)\r\n        };\r\n        debugger;\r\n        fetch( urlApi+'/users/update',requestOptions)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            debugger;\r\n            dispatch(setUser(data));\r\n        })\r\n\r\n    } catch{\r\n\r\n    }\r\n}\r\n\r\nexport const logoutUser = () => async(dispatch) => {\r\n    try {\r\n        let token =  localStorage.getItem(\"token\");\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: { \r\n                \"Content-type\": \"application/json; charset=UTF-8\",\r\n                \"Token\": token\r\n            },\r\n        };\r\n        debugger;\r\n        fetch( urlApi+'/users/me/logout',requestOptions)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            debugger;\r\n            dispatch(logUserOut());\r\n        })\r\n        .catch((e)=>{\r\n            console.log(e);\r\n        });\r\n        } catch{\r\n        \r\n        console.log('Error!');\r\n    }\r\n}\r\n\r\n\r\nexport const GetUsersPosts =  (page,author) => async dispatch=>{ \r\n    try {\r\n        if(!author)\r\n            return;\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            mode:'cors',\r\n            headers: { \r\n                \"Content-type\": \"application/json; charset=UTF-8\",\r\n            },\r\n            body: JSON.stringify({\r\n                    match:{\r\n                        author:author\r\n                    },\r\n                    sort:{},\r\n                    limit: 10,\r\n                    page: page\r\n                })\r\n        };\r\n        debugger;\r\n        fetch(urlApi+'/post/filterPosts', requestOptions)\r\n            .then(res => res.json())\r\n            .then(data => {\r\n                \r\n                dispatch(setUserPost(data));\r\n                dispatch(setUserLoading(true));\r\n            })\r\n            .catch((e)=>{\r\n                console.log(e);\r\n            });\r\n        } catch{\r\n            dispatch(setUserLoading(false));\r\n            console.log('Error!');\r\n        }\r\n    }\r\n\r\nexport const signUserUp = (userInfo) => dispatch => {\r\n    try {\r\n        fetch(urlApi+`/users/createNewUser`, {\r\n            method: \"PUT\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Accept\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(userInfo)\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n        \r\n            debugger;\r\n            localStorage.setItem(\"token\", data.currentToken);\r\n            dispatch(setUser(data.user));\r\n\r\n        })\r\n        .catch((e)=>{\r\n            console.log(e);\r\n        });\r\n    } catch{\r\n            \r\n        console.log('Error!');\r\n    }\r\n}\r\n\r\nexport const autoLogin = () => dispatch => {\r\n    try {\r\n        fetch(`urlApi/auto_login`, {\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Accept\": \"application/json\",\r\n                \"Authorization\": `Bearer ${localStorage.getItem(\"token\")}`\r\n            }\r\n        })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            \r\n            localStorage.setItem(\"token\", data.currentToken)\r\n            dispatch(setUser(data))\r\n        })\r\n        .catch((e)=>{\r\n            console.log(e);\r\n        });\r\n    } catch{\r\n            \r\n        console.log('Error!');\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}